{% extends "base.html" %}
{% block title %} All Brands {% endblock title %}
{% block content %}

    <style>
        label {
            color: LightGray;
        }

        input {
            width: 30px;

        }

        .dataTables_info {
            color: white;
        }

        a {
            color: royalblue;
        }

        p {
            color: black;
        }

        td {
            color: white;
        }
    </style>

    <script type="text/javascript" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap5.min.css">

    <div class="row" id="list-cards">
    </div>

    <script>
        var myArray = []

        $.ajax({
            method: 'GET',
            url: 'api/content/',
            success: function (response) {
                myArray = response
                buildTable(myArray)
            }
        })

        function buildTable(data) {
            var table = document.getElementById('list-cards')
            for (i in data) {
                {# JSON.stringify to convert object object to json format then covert it to dict #}
                channel_dict = JSON.stringify(data[i]['channel'])
                var row = `<div class="card">
                               <div class="card-body">
                                   <img class="card-img-bottom" src="${data[i].image}" alt="Card image cap" width="100" height="200">
                                   <h5 class="card-title" style="color: black">${data[i].name}</h5>
                                   <p class="card-text">${data[i].subject}</p>
                                   <p class="card-text"><small class="text-muted">${JSON.parse(channel_dict).name}</small></p>
                               </div>
                           </div>`

                table.innerHTML += row
            }
        }
    </script>

    <script>
        $(document).ready(function () {
            $('#example').DataTable();
        });
    </script>

{% endblock %}